$(function(){new Vue({el:"#app",data:{queryParam:{},items:[],title:"Add spider",item:{},count:0},mounted:function(){this.queryParam=getQueryParam();this.load()},methods:{load:function(){let n=this;http.get(`/api/v1.0/spiders?keyword=${this.queryParam.keyword}&page=${this.queryParam.page}&limit=${this.queryParam.limit}`,function(t){n.queryParam.page=t.data.page;n.queryParam.limit=t.data.limit;n.count=t.data.count;n.items=[];t.data.data.forEach(t=>{n.items.push(t)})})},add:function(){this.title="Add spider";this.item={};$("#modal").modal("show")},edit:function(n){this.title="Edit spider";this.item={id:n.id,name:n.name,image:n.image,cron:n.cron,type:n.type,environment:n.environment};$("#modal").modal("show")},submit:function(){const n=this;this.item.id?http.put("/api/v1.0/spiders/"+this.item.id,this.item,function(){n.load()}):http.post("/api/v1.0/spiders",this.item,function(){n.load()});$("#modal").modal("hide")},run:function(n){swal({title:"Sure to run this spider?",type:"warning",showCancelButton:!0},function(){let t=$(n.toElement).parent().parent().parent().attr("id");http.put("/api/v1.0/spiders/"+t+"/run",null,function(){swal("Success","Send signal success","success")})})},enable:function(n){const t=this;let i=$(n.toElement).parent().parent().parent().attr("id");http.put("/api/v1.0/spiders/"+i+"/enable",null,function(){t.load()})},disable:function(n){const t=this;swal({title:"Sure to disable this spider?",type:"warning",showCancelButton:!0},function(){let i=$(n.toElement).parent().parent().parent().attr("id");http.put("/api/v1.0/spiders/"+i+"/disable",null,function(){t.load()})})},remove:function(n){const t=this;swal({title:"Sure to remove this spider?",type:"warning",showCancelButton:!0},function(){let i=$(n.toElement).parent().parent().parent().attr("id");http.delete("/api/v1.0/spiders/"+i,function(){t.load()},function(){swal("Error","Remove spider failed","error")})})}}})});